---
layout: post
title: 이미 알고있는 함수형 프로그래밍 02
---


지난 몇주간 머릿속으로 구상만 하던 글감이다. 글로 잘 옮길 수 있을지 모르겠지만 최대한 노력해보자.

---

개발자라면 이제 함수형 프로그래밍에 대해 한 번은 들어봤을 것이다.
자바 개발자라면 `JAVA8`에서 함수형 프로그래밍이 도입되었다는 걸 알테고, 자바스크립트 개발자라면 자바스크립트는 원래 함수형이었다고 생각할지도 모르고, 파이선 개발자라면 함수형이 좋다는건 아는데 파이선에서 함수형으로 개발을 한다면 어떻게 해야할지 깜깜할 것이다.
리스프 진영이라면 이미 함수형에 익숙할테고, 하스켈 개발자라면 함수형이란 단어에 진저리난 상태일지도 모르고, 오카멜 개발자라면 함수형 그 다음을 생각하고 있을지 모른다.
어쨌든 함수형 프로그래밍이라는 단어는 개발자들 사이에서 널리 쓰이고 있다.

그런데 함수형 프로그래밍의 정의가 무엇인지 물으면, 사람들의 의견이 분분한 것 같다.
함수형 프로그래밍의 정의에 대해서 어떤 사람은 순수함수를 쓰는게 함수형 프로그래밍이라고 말한다(일단 순수함수라는 단어도 직관적이지 않다. 순수한 함수는 뭐고 순수하지 않은 함수는 뭔가? 처음 접하는 사람에게 의문을 더하는 정의이다).
어떤 사람은 불변형(immutable) 자료형을 쓰는 거라고(불변형이 뭐지?), 어떤 사람은 람다함수/익명함수를 쓰는거라고 말한다(람다는 또 뭐람).
어떤 사람은 `map`, `reduce`같은 고차함수(...)를 쓰는거라고, 어떤 사람은 1급함수(그럼 2급도 있나?)라고, 어떤 사람은 커링(`currying`)을 쓰는거라고 말할지도 모른다.

이 정도까지 들으면 나같은 함수형 프로그래밍 초급자는, 도대체 이놈의 함수형이 뭐가 좋길래 이 수많은 용어의 벽을 넘고 넘어서 써야만 하는가라고 묻기 십상이다.
`C`/`C++`/`C#`/`JAVA`/`PYTHON` 으로 여태까지 잘 살아왔고 다 만들어 왔는데, 도대체 왜! 함수형 프로그래밍을 해야한단 말인가? 뭐가 좋아서?
이거 배우느니 걍 하던거 더 잘하는게 낫겠다..라고 생각할 정도이다.

심지어 무엇이 진정한 함수형 프로그래밍인지에 대한 논란도 있어 보인다.
지난번에 어떤 글에서 "`map`, `reduce`를 쓴다고 함수형 프로그래밍을 하고있는게 아니다"라는 말을 읽었던 적이 있다.
이 말이 맞고 틀리고를 떠나서, 함수형 프로그래밍의 '진정성'의 이야기까지 나오고 있다는 점에서 무슨 철학 논쟁인가 싶다.

이쯤되면 함수형 프로그래밍은 소수만 아는 밀교적인 구결, 비전에 가까워 보인다. 특히 나처럼 수학에 문외한인 사람은, '람다함수'가 나오는 순간 뇌가 멈추는 것 같다.
누가 가르쳐주는 사람 없이 함수형이 좋다는 이야기만 들었을때, 도대체 이 수많은 전문용어의 벽들을 넘어서 언제 함수형 프로그래밍을 이해할 수 있을까라는 의문이 드는건 당연하다.

좋긴 좋다는데, 그럼 어떻게 내 코드에 적용해야 함수형 프로그래밍의 좋은 점을 느낄 수 있을까? 어떻게 하면 그 비밀스런 혜택을 나도 받을 수 있을까? 아니 함수형 프로그래밍이 도대체 뭐지?

...

이런 생각이 드는 사람들을 위해 몇편의 글을 써보려 한다.
제목은 "이미 알고있는 함수형 프로그래밍"으로 정했다.
왜냐하면, 우리는 **이미** 함수형 프로그래밍의 기본을 알고있기 때문이다! 짜잔! 놀랍게도 사실이다.

*이 글은 여러분이 이미 알고있는 함수형 프로그래밍의 지식을, 여러분이 알고있다고 스스로 깨닫게 만드려고 한다.*
나는 여러분이 이미 함수형 프로그래밍을 알고있다고 믿는다. 말하자면 플라톤스러운 '상기'인데, 표현도 플라톤 스러운 방법으로 가려다가 필력 부족으로 그만두기로 한다.

다만 유일한 조건이 있는데, 중학교 정규 수학과정을 이수해야 한다는 점이다. 안타깝게도 초등학생은 이해하기 어려울 것이며, 중학교 수학성적이 바닥이시라면 까다로울 수 있다. 하지만 일단 한국 의무교육을 믿고 글을 써 보고자 한다.

그럼 이제부터 여러분이 이미 알고있는 함수형 프로그래밍을 깨달아보자!


앞 글에서 호언장담 했듯이 "함수형 프로그래밍"에 대해서 기본부터 살펴보자.

우선 함수란 무엇인가? 우리는 함수가 뭔지 이미 알고있다. 중학교 때 배웠던 기억을 더듬에 보자. 함수의 정의는 무엇인가?

놀랍게도 기억이 나지 않을 가능성이 높다. 기억이 났더라도 엄밀한 의미의 정의와 분명 차이가 있을 거다. 사실 나도 기억나지 않는다. 수학 전공이 아닌 이상 우리는 함수의 명백한 정의를 알지 못한다. 하지만 시험에서 정답을 고르는데는 정말 익숙해질 수 있는 대한민국 교육 덕분에 어떤 함수가 **잘못된** 함수인지, 그리고 어떤 함수가 **맞는** 함수인지는 기억할 수 있다.

어떤 함수가 정의역을 가지고 치역을 가진다고 상상해보자. 정의역과 공역(및 치역)은 말풍선 같은 위아래로 길쭉한 타원형으로 표현되고, 그 안에 요소(꼭 숫자일 필요는 없지만 중학교 교육 상 숫자로 상상하자) 들어있다. 그리고 정의역의 각 요소는 하나씩 화살표와 연결되어 있다. 이 화살표들은 왼쪽의 공역 타원형 내의 요소들과 연결된다. 공역 요소들 중에서 화살표에 맞은 애들을 묶어서 치역이라고 불렀다. 이 그림의 위쪽 가운데 필기체로 f 또는 g라고 적혀있었을 것이다.

우리는 이걸 함수라고 배웠다.

그렇다면 잘못된 함수는? 크게 두가지가 보통 오답으로 선택지에 있었던 걸로 기억한다. 하나는 정의역 요소 중 하나에서 화살표가 나가지 않는 것이다.(그림이 있으면 넣자) 다른 하나는 정의역 요소 하나가 화살표 두개와 연결되어 있는 것이다.(마찬가지로 그림 찾아보기)

이 두 경우는 함수가 아니다. 라고 우리는 배웠고 문제를 풀어왔다.


뜬금없는 중학교 수학이었지만, 다시 컴퓨터 세계로 돌아와보자. 프로그래밍 언어(`C`, `JAVA`, `PYTHON`을 떠올려보시라. 완벽한 함수형 언어도 있으니까. 이하 언급하는 프로그래밍 언어는 함수형 언어를 제외한 것으로 생각해주자)의 함수는 함수인가? 이 프로그래밍 언어가 지원하는 `function`은, 수학적 의미의 함수와 같은가?

정답은 같지 않다이다. 수학적 함수와 프로그래밍 언어의 함수는 같지않다. 유명한 예를 들어서 어떻게 다른지 보자.
(C 언어에서 메모리에 의해 단순 덧셈이 달라지는 예시 - 대화형이나 코드형이나)

왜 이런 수학적 관점에서 말이 안되는 일이 컴퓨터에서는 벌어지는가? 그 이유는 단순하다. 환경이 다르기 때문이다. 수학적 의미의 함수는 "수"라는 세계를 환경으로 갖는다. 하지만 프로그래밍적 의미의 함수의 환경은 "수"가 아니다. 프로그래밍 언어의 함수는 "컴퓨터(에서 용도에 맞게 정의된 집합)"를 환경으로 한다. 이 환경의 차이가 모든 차이의 시작이다.

컴퓨터 공학을 시작하게한 기초 중 하나가 수학이기에, 프로그래밍 언어의 환경이 되는 "컴퓨터로 정의된 집합"은 "수"의 세계를 모방하였다. 하지만 완전히 같지많은 않으며, 그 *같지않음* 이 프로그래머들을 헷갈리게 하고 수많은 에러를 생산하게 한다. 프로그래머의 머리 속에서 "수"와 "컴퓨터에서 정의된 환경"이 분리된다는 명백한 인식이 없으면, 여기서부터 문제가 발생하는 것은 자연스러운 일이다. 따라서 우리는 이 두 환경이 어느 부분이 같고, 어느 부분이 다른지 분명히 하여야 프로그래머로서 겪어야 하는 수많은 혼란을 최소화 할 기본기를 다질 수 있다.

결론부터 말하면, 함수형 프로그래밍은 "컴퓨터의 세계"를 "수"의 세계에 최대한 가깝도록 변형시키고자 하는 시도의 일환이다. 즉 프로그래밍에서 발생하는 문제점들의 원인이 이 환경간의 차이에 있음을 인지하고, "컴퓨텨의 세계"를 추상화하여 "수"의 세계에 가깝도록 하는 것이다. 그렇게 함으로서 우리는 역사적으로 쌓아온 수학의 엄밀성을 활용할 수 있고, 인간에게 "컴퓨터적 사고방식"보다 친숙한 사고방식인 "수"적인 사고방식을 활용하여 프로그래밍을 할 수 있다. 그 결과 우리는 **오류없는** 프로그래밍에 한 발 더 가까워진다. 함수형 프로그래밍은 이런 그림 속에서 추구되는 가치 중 하나이다.


---
3부
람다함수란?

람다함수는 함수에서 컴퓨터 식의 메모리에 이름붙이기를 배제하고, 함수 자체를 숫자처럼 다루려는 방법이다.
